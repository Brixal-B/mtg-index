(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{56719:function(e,r,s){Promise.resolve().then(s.bind(s,91980))},18930:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3085:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},91804:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},91980:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return q}});var t=s(57437),a=s(2265),o=s(91804),l=s(99397),n=s(70525),d=s(3085),c=s(81605),i=s(39763);let u=(0,i.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var x=s(18930);function m(e){let{portfolios:r,selectedPortfolio:s,onSelectPortfolio:o,onDeletePortfolio:l}=e,[i,m]=(0,a.useState)(null),h=e=>{confirm("Are you sure you want to delete this portfolio? This action cannot be undone.")&&((0,c.BT)(e),l(e)),m(null)};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Your Portfolios"}),(0,t.jsx)("div",{className:"space-y-2",children:r.map(e=>{let r=(null==s?void 0:s.id)===e.id,a=e.totalCost>0?(e.totalValue-e.totalCost)/e.totalCost*100:0,l=e.totalValue-e.totalCost;return(0,t.jsxs)("div",{className:"relative border rounded-lg p-4 cursor-pointer transition-all ".concat(r?"border-primary bg-primary/5":"border-border bg-card hover:border-primary/50"),onClick:()=>o(e),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-medium text-foreground truncate",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-1",children:e.description}),(0,t.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Cards:"}),(0,t.jsx)("span",{className:"font-medium",children:e.cards.length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Value:"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",e.totalValue.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Performance:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 ".concat(a>=0?"text-green-600":"text-red-600"),children:[a>=0?(0,t.jsx)(n.Z,{className:"h-3 w-3"}):(0,t.jsx)(d.Z,{className:"h-3 w-3"}),(0,t.jsxs)("span",{className:"font-medium",children:[a>=0?"+":"",a.toFixed(1),"%"]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:r=>{r.stopPropagation(),m(i===e.id?null:e.id)},className:"p-1 text-muted-foreground hover:text-foreground transition-colors",children:(0,t.jsx)(u,{className:"h-4 w-4"})}),i===e.id&&(0,t.jsx)("div",{className:"absolute right-0 top-8 bg-card border border-border rounded-lg shadow-lg z-10 min-w-[150px]",children:(0,t.jsxs)("button",{onClick:r=>{r.stopPropagation(),h(e.id)},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Delete"})]})})]})]}),(0,t.jsx)("div",{className:"mt-3 pt-3 border-t border-border",children:(0,t.jsxs)("div",{className:"text-xs font-medium ".concat(l>=0?"text-green-600":"text-red-600"),children:[l>=0?"+":"","$",l.toFixed(2)," total"]})})]},e.id)})})]})}var h=s(73247),p=s(95252),f=s(32489),g=s(13655),b=s(95040),j=s(70309),N=s(41239);let v=[{value:"mint",label:"Mint (M)"},{value:"near_mint",label:"Near Mint (NM)"},{value:"excellent",label:"Excellent (EX)"},{value:"good",label:"Good (GD)"},{value:"light_played",label:"Light Played (LP)"},{value:"played",label:"Played (PL)"},{value:"poor",label:"Poor (PR)"}];function y(e){var r;let{isOpen:s,onClose:o,onAddCard:n}=e,[d,c]=(0,a.useState)(""),[i,u]=(0,a.useState)([]),[x,m]=(0,a.useState)(null),[p,y]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null),[C,P]=(0,a.useState)(1),[S,Z]=(0,a.useState)(""),[q,F]=(0,a.useState)("near_mint"),[M,I]=(0,a.useState)(!1),[T,$]=(0,a.useState)(""),V=(0,a.useCallback)(async e=>{if(!e.trim()){u([]);return}y(!0),k(null);try{let r=await (0,g.mb)(e,{page:1});u(r.cards.slice(0,20))}catch(e){k(e instanceof Error?e.message:"Failed to search cards"),u([])}finally{y(!1)}},[]),A=e=>{m(e);let r=e.prices.usd||e.prices.eur||0;r>0&&Z(r.toString())};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&o()},children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Add Card to Portfolio"}),(0,t.jsx)("button",{onClick:()=>{m(null),P(1),Z(""),F("near_mint"),I(!1),$(""),c(""),u([]),k(null),o()},className:"p-2 hover:bg-accent rounded-lg transition-colors",children:(0,t.jsx)(f.Z,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:x?(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-accent rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-22 bg-muted rounded border flex-shrink-0",children:x.imageUrl?(0,t.jsx)("img",{src:x.imageUrl,alt:x.name,className:"w-full h-full object-cover rounded"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-muted-foreground text-center p-1",children:x.name})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:x.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:x.setName}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current Price: $",(null===(r=x.prices.usd)||void 0===r?void 0:r.toFixed(2))||"N/A"]})]}),(0,t.jsx)("button",{onClick:()=>m(null),className:"text-muted-foreground hover:text-foreground transition-colors",children:(0,t.jsx)(f.Z,{className:"h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Quantity *"}),(0,t.jsx)("input",{type:"number",min:"1",value:C,onChange:e=>P(Math.max(1,parseInt(e.target.value)||1)),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Purchase Price (USD) *"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:S,onChange:e=>Z(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Condition"}),(0,t.jsx)("select",{value:q,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:v.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Foil"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"foil",checked:M,onChange:e=>I(e.target.checked),className:"rounded border-border text-primary focus:ring-primary"}),(0,t.jsx)("label",{htmlFor:"foil",className:"text-sm text-foreground",children:"This is a foil card"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Notes (Optional)"}),(0,t.jsx)("textarea",{value:T,onChange:e=>$(e.target.value),placeholder:"Add any notes about this card...",rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none"})]})]}):(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Search for a card"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter card name...",value:d,onChange:e=>{c(e.target.value),V(e.target.value)},className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),w&&(0,t.jsx)(j.B,{message:w,onRetry:()=>V(d)}),p&&(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(b.T,{size:"large"})}),i.length>0&&!p&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-foreground",children:["Search Results (",i.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-96 overflow-y-auto",children:i.map(e=>(0,t.jsx)("div",{onClick:()=>A(e),className:"cursor-pointer",children:(0,t.jsx)(N.S,{card:e,onClick:()=>A(e),showActions:!1})},e.id))})]}),d&&!p&&0===i.length&&!w&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(h.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No cards found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your search terms or check the spelling."})]})]})}),x&&(0,t.jsx)("div",{className:"p-6 border-t border-border",children:(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{onClick:()=>m(null),className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-accent transition-colors",children:"Back to Search"}),(0,t.jsxs)("button",{onClick:()=>{x&&(n({cardId:x.id,card:x,quantity:C,purchasePrice:parseFloat(S)||0,purchaseDate:new Date().toISOString(),condition:q,foil:M,notes:T.trim()||void 0}),m(null),P(1),Z(""),F("near_mint"),I(!1),$(""),c(""),u([]))},disabled:!S||0>parseFloat(S),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Add to Portfolio"})]})]})})]})}):null}var w=s(33145);let k=(0,i.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),C={mint:"Mint",near_mint:"Near Mint",excellent:"Excellent",good:"Good",light_played:"Light Played",played:"Played",poor:"Poor"};function P(e){let{portfolioCard:r,onRemove:s,onUpdate:o}=e,[l,c]=(0,a.useState)(!1),[i,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)({quantity:r.quantity,purchasePrice:r.purchasePrice,condition:r.condition,notes:r.notes||""}),f=r.card.prices.usd||0,g=f*r.quantity,b=r.purchasePrice*r.quantity,j=g-b,N=b>0?j/b*100:0;return(0,t.jsx)("div",{className:"p-4 space-y-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"w-12 h-16 bg-muted rounded border flex-shrink-0",children:r.card.imageUrl?(0,t.jsx)(w.default,{src:r.card.imageUrl,alt:r.card.name,width:48,height:64,className:"w-full h-full object-cover rounded"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-muted-foreground text-center p-1",children:r.card.name.substring(0,10)})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("h4",{className:"font-medium text-foreground truncate",children:[r.card.name,r.foil&&(0,t.jsx)("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Foil"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[r.card.setName," • ",C[r.condition]]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>m(!i),className:"p-1 text-muted-foreground hover:text-foreground transition-colors",children:(0,t.jsx)(u,{className:"h-4 w-4"})}),i&&(0,t.jsxs)("div",{className:"absolute right-0 top-8 bg-card border border-border rounded-lg shadow-lg z-10 min-w-[120px]",children:[(0,t.jsxs)("button",{onClick:()=>{c(!0),m(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-foreground hover:bg-accent transition-colors",children:[(0,t.jsx)(k,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Edit"})]}),(0,t.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to remove this card from your portfolio?")&&s(),m(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Remove"})]})]})]})]}),l?(0,t.jsxs)("div",{className:"mt-2 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-muted-foreground mb-1",children:"Quantity"}),(0,t.jsx)("input",{type:"number",min:"1",value:h.quantity,onChange:e=>p(r=>({...r,quantity:Math.max(1,parseInt(e.target.value)||1)})),className:"w-full px-2 py-1 text-sm border border-border rounded bg-background focus:outline-none focus:ring-1 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-muted-foreground mb-1",children:"Purchase Price"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:h.purchasePrice,onChange:e=>p(r=>({...r,purchasePrice:parseFloat(e.target.value)||0})),className:"w-full px-2 py-1 text-sm border border-border rounded bg-background focus:outline-none focus:ring-1 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-muted-foreground mb-1",children:"Condition"}),(0,t.jsx)("select",{value:h.condition,onChange:e=>p(r=>({...r,condition:e.target.value})),className:"w-full px-2 py-1 text-sm border border-border rounded bg-background focus:outline-none focus:ring-1 focus:ring-primary",children:Object.entries(C).map(e=>{let[r,s]=e;return(0,t.jsx)("option",{value:r,children:s},r)})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-muted-foreground mb-1",children:"Notes"}),(0,t.jsx)("input",{type:"text",value:h.notes,onChange:e=>p(r=>({...r,notes:e.target.value})),placeholder:"Optional notes...",className:"w-full px-2 py-1 text-sm border border-border rounded bg-background focus:outline-none focus:ring-1 focus:ring-primary"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{o({...r,quantity:h.quantity,purchasePrice:h.purchasePrice,condition:h.condition,notes:h.notes.trim()||void 0}),c(!1)},className:"px-3 py-1 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors",children:"Save"}),(0,t.jsx)("button",{onClick:()=>{p({quantity:r.quantity,purchasePrice:r.purchasePrice,condition:r.condition,notes:r.notes||""}),c(!1)},className:"px-3 py-1 text-sm border border-border text-foreground rounded hover:bg-accent transition-colors",children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Quantity:"}),(0,t.jsx)("span",{className:"ml-1 font-medium",children:r.quantity})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Purchase:"}),(0,t.jsxs)("span",{className:"ml-1 font-medium",children:["$",r.purchasePrice.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Current:"}),(0,t.jsxs)("span",{className:"ml-1 font-medium",children:["$",f.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Total Value:"}),(0,t.jsxs)("span",{className:"ml-1 font-medium",children:["$",g.toFixed(2)]})]})]}),!l&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-sm ".concat(j>=0?"text-green-600":"text-red-600"),children:[j>=0?(0,t.jsx)(n.Z,{className:"h-3 w-3"}):(0,t.jsx)(d.Z,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[j>=0?"+":"","$",j.toFixed(2),"(",N>=0?"+":"",N.toFixed(1),"%)"]})]}),r.notes&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground italic truncate max-w-xs",children:r.notes})]})]})]})})}function S(e){let{portfolio:r,onPortfolioUpdated:s}=e,[o,i]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),[m,f]=(0,a.useState)("name"),[g,b]=(0,a.useState)("asc"),j=(e,t,a)=>{let o=r.cards.filter(r=>!(r.cardId===e&&r.foil===t&&r.condition===a)),l=o.reduce((e,r)=>e+(r.card.prices.usd||0)*r.quantity,0),n=o.reduce((e,r)=>e+r.purchasePrice*r.quantity,0),d={...r,cards:o,totalValue:l,totalCost:n,performance:n>0?(l-n)/n*100:0,updatedAt:new Date().toISOString()};(0,c.$8)(d),s(d)},N=e=>{let t=r.cards.map(r=>r.cardId===e.cardId&&r.foil===e.foil&&r.condition===e.condition?e:r),a=t.reduce((e,r)=>e+(r.card.prices.usd||0)*r.quantity,0),o=t.reduce((e,r)=>e+r.purchasePrice*r.quantity,0),l={...r,cards:t,totalValue:a,totalCost:o,performance:o>0?(a-o)/o*100:0,updatedAt:new Date().toISOString()};(0,c.$8)(l),s(l)},v=r.cards.filter(e=>e.card.name.toLowerCase().includes(u.toLowerCase())||e.card.setName.toLowerCase().includes(u.toLowerCase())).sort((e,r)=>{let s,t;switch(m){case"name":default:s=e.card.name,t=r.card.name;break;case"value":s=(e.card.prices.usd||0)*e.quantity,t=(r.card.prices.usd||0)*r.quantity;break;case"performance":let a=((e.card.prices.usd||0)-e.purchasePrice)*e.quantity,o=((r.card.prices.usd||0)-r.purchasePrice)*r.quantity;s=a,t=o;break;case"quantity":s=e.quantity,t=r.quantity}return"string"==typeof s&&"string"==typeof t?"asc"===g?s.localeCompare(t):t.localeCompare(s):"asc"===g?s-t:t-s}),w=r.totalValue-r.totalCost;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:r.name}),r.description&&(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:r.description})]}),(0,t.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Add Card"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Cards"}),(0,t.jsx)("div",{className:"text-xl font-semibold text-foreground",children:r.cards.reduce((e,r)=>e+r.quantity,0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Current Value"}),(0,t.jsxs)("div",{className:"text-xl font-semibold text-foreground",children:["$",r.totalValue.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Cost"}),(0,t.jsxs)("div",{className:"text-xl font-semibold text-foreground",children:["$",r.totalCost.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Gain/Loss"}),(0,t.jsxs)("div",{className:"text-xl font-semibold flex items-center space-x-1 ".concat(w>=0?"text-green-600":"text-red-600"),children:[w>=0?(0,t.jsx)(n.Z,{className:"h-5 w-5"}):(0,t.jsx)(d.Z,{className:"h-5 w-5"}),(0,t.jsxs)("span",{children:[w>=0?"+":"","$",w.toFixed(2)]}),(0,t.jsxs)("span",{className:"text-sm",children:["(",r.performance>=0?"+":"",r.performance.toFixed(1),"%)"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",placeholder:"Search cards...",value:u,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,t.jsx)("option",{value:"name",children:"Sort by Name"}),(0,t.jsx)("option",{value:"value",children:"Sort by Value"}),(0,t.jsx)("option",{value:"performance",children:"Sort by Performance"}),(0,t.jsx)("option",{value:"quantity",children:"Sort by Quantity"})]}),(0,t.jsx)("button",{onClick:()=>b("asc"===g?"desc":"asc"),className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground hover:bg-accent transition-colors",children:"asc"===g?"↑":"↓"})]})]}),0===r.cards.length?(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-12 text-center",children:[(0,t.jsx)(p.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No cards in portfolio"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Start building your portfolio by adding some cards."}),(0,t.jsxs)("button",{onClick:()=>i(!0),className:"inline-flex items-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Add Your First Card"})]})]}):(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border",children:(0,t.jsxs)("h3",{className:"font-semibold text-foreground",children:["Cards (",v.length,")"]})}),(0,t.jsx)("div",{className:"divide-y divide-border",children:v.map(e=>(0,t.jsx)(P,{portfolioCard:e,onRemove:()=>j(e.cardId,e.foil,e.condition),onUpdate:N},"".concat(e.cardId,"-").concat(e.foil,"-").concat(e.condition)))})]}),(0,t.jsx)(y,{isOpen:o,onClose:()=>i(!1),onAddCard:e=>{let t;let a=r.cards.findIndex(r=>r.cardId===e.cardId&&r.foil===e.foil&&r.condition===e.condition),o=(t=a>=0?r.cards.map((r,s)=>s===a?{...r,quantity:r.quantity+e.quantity}:r):[...r.cards,e]).reduce((e,r)=>e+(r.card.prices.usd||0)*r.quantity,0),l=t.reduce((e,r)=>e+r.purchasePrice*r.quantity,0),n={...r,cards:t,totalValue:o,totalCost:l,performance:l>0?(o-l)/l*100:0,updatedAt:new Date().toISOString()};(0,c.$8)(n),s(n),i(!1)}})]})}function Z(e){let{isOpen:r,onClose:s,onPortfolioCreated:l}=e,[n,d]=(0,a.useState)(""),[i,u]=(0,a.useState)(""),[x,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),g=async e=>{if(e.preventDefault(),!n.trim()){p("Portfolio name is required");return}m(!0),p("");try{let e={id:crypto.randomUUID(),name:n.trim(),description:i.trim()||void 0,cards:[],totalValue:0,totalCost:0,performance:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};(0,c.$8)(e),l(e),d(""),u("")}catch(e){p("Failed to create portfolio. Please try again."),console.error("Error creating portfolio:",e)}finally{m(!1)}},b=()=>{d(""),u(""),p(""),s()};return r?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&s()},children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create New Portfolio"})]}),(0,t.jsx)("button",{onClick:b,className:"p-2 hover:bg-accent rounded-lg transition-colors",children:(0,t.jsx)(f.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("form",{onSubmit:g,className:"p-6 space-y-4",children:[h&&(0,t.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:h})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground",children:"Portfolio Name *"}),(0,t.jsx)("input",{id:"name",type:"text",value:n,onChange:e=>d(e.target.value),placeholder:"e.g., Modern Collection, Investment Cards",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",disabled:x,maxLength:100})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-foreground",children:"Description"}),(0,t.jsx)("textarea",{id:"description",value:i,onChange:e=>u(e.target.value),placeholder:"Optional description for your portfolio",rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none",disabled:x,maxLength:500})]}),(0,t.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:b,disabled:x,className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-accent transition-colors disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:x||!n.trim(),className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 font-medium",children:x?"Creating...":"Create Portfolio"})]})]})]})}):null}function q(){let[e,r]=(0,a.useState)([]),[s,i]=(0,a.useState)(null),[u,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(()=>{try{let e=(0,c.r3)();r(e),e.length>0&&!s&&i(e[0])}catch(e){console.error("Error loading portfolios:",e)}finally{p(!1)}})()},[s]);let f=e.reduce((e,r)=>e+r.totalValue,0),g=e.reduce((e,r)=>e+r.totalCost,0),b=f-g,j=g>0?(f-g)/g*100:0;return h?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.Z,{className:"h-8 w-8 text-primary"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Portfolio Management"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Track your MTG card investments and monitor performance"})]}),(0,t.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"New Portfolio"})]})]}),e.length>0&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Portfolios"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:e.length})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Current Value"})}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:["$",f.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Cost"})}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:["$",g.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[b>=0?(0,t.jsx)(n.Z,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(d.Z,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Gain/Loss"})]}),(0,t.jsxs)("div",{className:"text-2xl font-bold ".concat(b>=0?"text-green-600":"text-red-600"),children:[b>=0?"+":"","$",b.toFixed(2),(0,t.jsxs)("span",{className:"text-sm ml-1",children:["(",j>=0?"+":"",j.toFixed(1),"%)"]})]})]})]}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,t.jsx)(o.Z,{className:"h-16 w-16 text-muted-foreground mx-auto"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"No portfolios yet"}),(0,t.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Create your first portfolio to start tracking your MTG card investments and monitor their performance over time."})]}),(0,t.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center space-x-2 bg-primary text-primary-foreground px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(l.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Create Your First Portfolio"})]})]}):(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(m,{portfolios:e,selectedPortfolio:s,onSelectPortfolio:i,onDeletePortfolio:t=>{if(r(e=>e.filter(e=>e.id!==t)),(null==s?void 0:s.id)===t){let r=e.filter(e=>e.id!==t);i(r.length>0?r[0]:null)}}})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:s?(0,t.jsx)(S,{portfolio:s,onPortfolioUpdated:e=>{r(r=>r.map(r=>r.id===e.id?e:r)),(null==s?void 0:s.id)===e.id&&i(e)}}):(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,t.jsx)(o.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Select a Portfolio"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Choose a portfolio from the list to view its details and performance."})]})})]}),(0,t.jsx)(Z,{isOpen:u,onClose:()=>x(!1),onPortfolioCreated:e=>{r(r=>[...r,e]),i(e),x(!1)}})]})}}},function(e){e.O(0,[396,145,971,117,744],function(){return e(e.s=56719)}),_N_E=e.O()}]);