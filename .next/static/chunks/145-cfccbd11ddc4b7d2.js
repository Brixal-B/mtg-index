"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{95252:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},99397:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},82431:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},73247:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},32489:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},41239:function(e,t,r){r.d(t,{S:function(){return h}});var n=r(57437),o=r(2265),a=r(33145),c=r(42208),i=r(86595),s=r(99397),l=r(95252),d=r(81605);let u={common:"border-gray-400 bg-gray-50",uncommon:"border-gray-600 bg-gray-100",rare:"border-yellow-500 bg-yellow-50",mythic:"border-orange-500 bg-orange-50"},m={"{W}":"⚪","{U}":"\uD83D\uDD35","{B}":"⚫","{R}":"\uD83D\uDD34","{G}":"\uD83D\uDFE2","{C}":"◇","{X}":"X"};function h(e){let{card:t,onClick:r,showActions:h=!0}=e,[f,p]=(0,o.useState)((0,d.sO)(t.id)),[x,g]=(0,o.useState)(!1),v=t.prices.usd||t.prices.eur||0,y=v>0?"$".concat(v.toFixed(2)):"N/A";return(0,n.jsxs)("div",{className:"group relative bg-card border rounded-lg overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer ".concat(u[t.rarity]),onClick:r,children:[(0,n.jsxs)("div",{className:"aspect-[5/7] relative bg-muted",children:[t.imageUrl&&!x?(0,n.jsx)(a.default,{src:t.imageUrl,alt:t.name,fill:!0,className:"object-cover",onError:()=>g(!0),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,n.jsx)("div",{className:"flex items-center justify-center h-full bg-muted text-muted-foreground",children:(0,n.jsxs)("div",{className:"text-center p-4",children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-1",children:t.name}),(0,n.jsx)("div",{className:"text-xs",children:t.setCode.toUpperCase()})]})}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),null==r||r()},className:"p-2 bg-white/20 backdrop-blur-sm rounded-full hover:bg-white/30 transition-colors",title:"View Details",children:(0,n.jsx)(c.Z,{className:"h-4 w-4 text-white"})}),h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),f?((0,d.BZ)(t.id),p(!1)):((0,d.FW)(t.id),p(!0))},className:"p-2 backdrop-blur-sm rounded-full transition-colors ".concat(f?"bg-yellow-500/80 hover:bg-yellow-500":"bg-white/20 hover:bg-white/30"),title:f?"Remove from Watchlist":"Add to Watchlist",children:(0,n.jsx)(i.Z,{className:"h-4 w-4 ".concat(f?"text-white fill-current":"text-white")})}),(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),console.log("Add to portfolio:",t.name)},className:"p-2 bg-white/20 backdrop-blur-sm rounded-full hover:bg-white/30 transition-colors",title:"Add to Portfolio",children:(0,n.jsx)(s.Z,{className:"h-4 w-4 text-white"})})]})]})})]}),(0,n.jsxs)("div",{className:"p-3 space-y-2",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h3",{className:"font-medium text-foreground text-sm leading-tight line-clamp-2",children:t.name}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.setName," • ",t.rarity]})]}),t.manaCost&&(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Mana: "}),(0,n.jsx)("span",{className:"font-mono",children:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;return Object.entries(m).forEach(e=>{let[r,n]=e;t=t.replace(RegExp(r.replace(/[{}]/g,"\\$&"),"g"),n)}),t=t.replace(/\{(\d+)\}/g,"$1")}(t.manaCost)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(l.Z,{className:"h-3 w-3 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-sm font-medium ".concat(v>0?"text-foreground":"text-muted-foreground"),children:y})]}),f&&(0,n.jsx)(i.Z,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground line-clamp-1",children:t.type})]})]})}},70309:function(e,t,r){r.d(t,{B:function(){return c}});var n=r(57437),o=r(22252),a=r(82431);function c(e){let{message:t,onRetry:r,className:c=""}=e;return(0,n.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 ".concat(c),children:(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)(o.Z,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-destructive mb-1",children:"Error"}),(0,n.jsx)("p",{className:"text-sm text-destructive/90",children:t}),r&&(0,n.jsxs)("button",{onClick:r,className:"inline-flex items-center space-x-2 mt-3 text-sm text-destructive hover:text-destructive/80 transition-colors",children:[(0,n.jsx)(a.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Try Again"})]})]})]})})}},95040:function(e,t,r){r.d(t,{T:function(){return o}});var n=r(57437);function o(e){let{size:t="medium",className:r=""}=e;return(0,n.jsx)("div",{className:"flex items-center justify-center ".concat(r),children:(0,n.jsx)("div",{className:"animate-spin rounded-full border-2 border-primary border-t-transparent ".concat({small:"h-4 w-4",medium:"h-6 w-6",large:"h-8 w-8"}[t]),role:"status","aria-label":"Loading",children:(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})})})}},13655:function(e,t,r){r.d(t,{mb:function(){return i},nO:function(){return l},qj:function(){return s},yF:function(){return d}});let n="https://api.scryfall.com",o=0;async function a(e){let t=Date.now()-o;t<100&&await new Promise(e=>setTimeout(e,100-t)),o=Date.now();let r=await fetch(e);if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return r}function c(e){var t,r,n,o,a,c,i,s,l,d;return{id:e.id,name:e.name,manaCost:e.mana_cost||"",convertedManaCost:e.cmc||0,type:e.type_line||"",text:e.oracle_text||"",flavorText:e.flavor_text||"",power:e.power||"",toughness:e.toughness||"",loyalty:e.loyalty||"",imageUrl:(null===(t=e.image_uris)||void 0===t?void 0:t.normal)||(null===(o=e.card_faces)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:null===(r=n.image_uris)||void 0===r?void 0:r.normal)||"",setName:e.set_name||"",setCode:e.set||"",number:e.collector_number||"",artist:e.artist||"",rarity:"mythic"===e.rarity?"mythic":"rare"===e.rarity?"rare":"uncommon"===e.rarity?"uncommon":"common",colors:e.colors||[],colorIdentity:e.color_identity||[],prices:{usd:(null===(a=e.prices)||void 0===a?void 0:a.usd)?parseFloat(e.prices.usd):null,usdFoil:(null===(c=e.prices)||void 0===c?void 0:c.usd_foil)?parseFloat(e.prices.usd_foil):null,eur:(null===(i=e.prices)||void 0===i?void 0:i.eur)?parseFloat(e.prices.eur):null,eurFoil:(null===(s=e.prices)||void 0===s?void 0:s.eur_foil)?parseFloat(e.prices.eur_foil):null,tix:(null===(l=e.prices)||void 0===l?void 0:l.tix)?parseFloat(e.prices.tix):null},legalities:e.legalities||{},multiverseId:null===(d=e.multiverse_ids)||void 0===d?void 0:d[0],scryfallId:e.id}}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{page:r=1,limit:o=20,order:i="name",dir:s="asc"}=t;try{var l;let t=new URLSearchParams({q:e,page:r.toString(),format:"json",order:i,dir:s}),o="".concat(n,"/cards/search?").concat(t),d=await a(o),u=await d.json(),m=(null===(l=u.data)||void 0===l?void 0:l.map(c))||[],h=u.total_cards||0;return{data:m,cards:m,totalCount:h,totalCards:h,hasMore:u.has_more||!1,page:r}}catch(e){return console.error("Error searching cards:",e),{data:[],cards:[],totalCount:0,totalCards:0,hasMore:!1,page:1}}}async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{colors:n,types:o,sets:a,rarity:c,minCmc:s,maxCmc:l,minPrice:d,maxPrice:u,format:m}=t,h=e;return n&&n.length>0&&(h+=" color:".concat(n.join(""))),o&&o.length>0&&(h+=" type:".concat(o.join(" OR type:"))),a&&a.length>0&&(h+=" set:".concat(a.join(" OR set:"))),c&&c.length>0&&(h+=" rarity:".concat(c.join(" OR rarity:"))),void 0!==s&&(h+=" cmc>=".concat(s)),void 0!==l&&(h+=" cmc<=".concat(l)),void 0!==d&&(h+=" usd>=".concat(d)),void 0!==u&&(h+=" usd<=".concat(u)),m&&(h+=" format:".concat(m)),i(h.trim(),r)}async function l(e){try{let t="".concat(n,"/cards/").concat(e),r=await a(t),o=await r.json();return c(o)}catch(t){throw console.error("Error fetching card:",t),Error("Failed to fetch card with ID: ".concat(e))}}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{let r=(await l(e)).prices.usd||0,n=[],o=new Date;for(let e=t;e>=0;e--){let t=new Date(o);t.setDate(t.getDate()-e);let a=(Math.random()-.5)*.1,c=1+a,i=r*Math.pow(.99+.02*Math.random(),e),s=Math.max(.01,i*c);n.push({date:t.toISOString().split("T")[0],price:Math.round(100*s)/100,priceType:"usd"})}return n}catch(e){return console.error("Error fetching price history:",e),[]}}},81605:function(e,t,r){r.d(t,{$8:function(){return i},BT:function(){return s},BZ:function(){return u},Cp:function(){return p},FW:function(){return d},_X:function(){return f},r3:function(){return c},sO:function(){return m},uT:function(){return l}});let n={PORTFOLIOS:"mtg-portfolios",WATCHLIST:"mtg-watchlist",PREFERENCES:"mtg-preferences",PRICE_ALERTS:"mtg-price-alerts",LAST_SYNC:"mtg-last-sync"};function o(e,t){try{let r=localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.error('Error reading from localStorage key "'.concat(e,'":'),r),t}}function a(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error('Error writing to localStorage key "'.concat(e,'":'),t)}}function c(){return o(n.PORTFOLIOS,[])}function i(e){let t=c(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e),a(n.PORTFOLIOS,t),h()}function s(e){let t=c().filter(t=>t.id!==e);a(n.PORTFOLIOS,t),h()}function l(){return o(n.WATCHLIST,[])}function d(e){let t=l();t.includes(e)||(t.push(e),a(n.WATCHLIST,t),h())}function u(e){let t=l().filter(t=>t!==e);a(n.WATCHLIST,t),h()}function m(e){return l().includes(e)}function h(){a(n.LAST_SYNC,new Date().toISOString())}function f(){Object.values(n).forEach(e=>{!function(e){try{localStorage.removeItem(e)}catch(t){console.error('Error removing localStorage key "'.concat(e,'":'),t)}}(e)})}function p(){try{let e=0;Object.values(n).forEach(t=>{let r=localStorage.getItem(t);r&&(e+=r.length)});let t=e/5242880*100;return{used:e,total:5242880,percentage:t}}catch(e){return console.error("Error calculating storage usage:",e),{used:0,total:0,percentage:0}}}}}]);