(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{11914:(e,t,r)=>{"use strict";r.d(t,{Md:()=>o,SQ:()=>i,XJ:()=>d,jG:()=>c});let s="https://api.scryfall.com",a=0;async function l(e){let t=Date.now()-a;t<100&&await new Promise(e=>setTimeout(e,100-t)),a=Date.now();let r=await fetch(e);if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return r}function n(e){var t,r,s,a,l,n,o,c,d,i;return{id:e.id,name:e.name,manaCost:e.mana_cost||"",convertedManaCost:e.cmc||0,type:e.type_line||"",text:e.oracle_text||"",flavorText:e.flavor_text||"",power:e.power||"",toughness:e.toughness||"",loyalty:e.loyalty||"",imageUrl:(null==(t=e.image_uris)?void 0:t.normal)||(null==(a=e.card_faces)||null==(s=a[0])||null==(r=s.image_uris)?void 0:r.normal)||"",setName:e.set_name||"",setCode:e.set||"",number:e.collector_number||"",artist:e.artist||"",rarity:"mythic"===e.rarity?"mythic":"rare"===e.rarity?"rare":"uncommon"===e.rarity?"uncommon":"common",colors:e.colors||[],colorIdentity:e.color_identity||[],prices:{usd:(null==(l=e.prices)?void 0:l.usd)?parseFloat(e.prices.usd):null,usdFoil:(null==(n=e.prices)?void 0:n.usd_foil)?parseFloat(e.prices.usd_foil):null,eur:(null==(o=e.prices)?void 0:o.eur)?parseFloat(e.prices.eur):null,eurFoil:(null==(c=e.prices)?void 0:c.eur_foil)?parseFloat(e.prices.eur_foil):null,tix:(null==(d=e.prices)?void 0:d.tix)?parseFloat(e.prices.tix):null},legalities:e.legalities||{},multiverseId:null==(i=e.multiverse_ids)?void 0:i[0],scryfallId:e.id}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{page:r=1,limit:a=20,order:o="name",dir:c="asc"}=t;try{var d;let t=new URLSearchParams({q:e,page:r.toString(),format:"json",order:o,dir:c}),a="".concat(s,"/cards/search?").concat(t),i=await l(a),m=await i.json(),x=(null==(d=m.data)?void 0:d.map(n))||[],u=m.total_cards||0;return{data:x,cards:x,totalCount:u,totalCards:u,hasMore:m.has_more||!1,page:r}}catch(e){return console.error("Error searching cards:",e),{data:[],cards:[],totalCount:0,totalCards:0,hasMore:!1,page:1}}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{colors:s,types:a,sets:l,rarity:n,minCmc:c,maxCmc:d,minPrice:i,maxPrice:m,format:x}=t,u=e;return s&&s.length>0&&(u+=" color:".concat(s.join(""))),a&&a.length>0&&(u+=" type:".concat(a.join(" OR type:"))),l&&l.length>0&&(u+=" set:".concat(l.join(" OR set:"))),n&&n.length>0&&(u+=" rarity:".concat(n.join(" OR rarity:"))),void 0!==c&&(u+=" cmc>=".concat(c)),void 0!==d&&(u+=" cmc<=".concat(d)),void 0!==i&&(u+=" usd>=".concat(i)),void 0!==m&&(u+=" usd<=".concat(m)),x&&(u+=" format:".concat(x)),o(u.trim(),r)}async function d(e){try{let t="".concat(s,"/cards/").concat(e),r=await l(t),a=await r.json();return n(a)}catch(t){throw console.error("Error fetching card:",t),Error("Failed to fetch card with ID: ".concat(e))}}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{let r=(await d(e)).prices.usd||0,s=[],a=new Date;for(let e=t;e>=0;e--){let t=new Date(a);t.setDate(t.getDate()-e);let l=(Math.random()-.5)*.1,n=1+l,o=r*Math.pow(.99+.02*Math.random(),e),c=Math.max(.01,o*n);s.push({date:t.toISOString().split("T")[0],price:Math.round(100*c)/100,priceType:"usd"})}return s}catch(e){return console.error("Error fetching price history:",e),[]}}},34805:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>W});var s=r(95155),a=r(12115),l=r(74571),n=r(33109),o=r(34576),c=r(10809),d=r(16785),i=r(90531),m=r(83540),x=r(93504),u=r(94754),h=r(96025),f=r(16238),g=r(94517),p=r(21374);function j(e){var t,r,l,n;let{portfolios:o,timeframe:c}=e,[d,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{i(!0)},[]);let j=(0,a.useMemo)(()=>{if(!d)return[];let e="7d"===c?7:"30d"===c?30:"90d"===c?90:365,t=[],r=new Date,s=o.reduce((e,t)=>e+t.totalValue,0),a=o.reduce((e,t)=>e+t.totalCost,0);for(let l=e-1;l>=0;l--){let n=new Date(r);n.setDate(n.getDate()-l);let o=s*(.95+.1*Math.random())*(1-l/e*.1);t.push({date:n.toISOString().split("T")[0],value:Math.round(100*o)/100,cost:Math.round(100*a)/100,gainLoss:Math.round((o-a)*100)/100})}return t},[o,c,d]),v=e=>"$".concat(e.toFixed(0));return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Portfolio Value Over Time"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Track your portfolio value and cost basis over the selected timeframe"})]}),(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(m.u,{width:"100%",height:"100%",children:(0,s.jsxs)(x.b,{data:j,margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",className:"opacity-30"}),(0,s.jsx)(h.W,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)(f.h,{tick:{fontSize:12},tickFormatter:v}),(0,s.jsx)(g.m,{content:(0,s.jsx)(e=>{let{active:t,payload:r,label:a}=e;return t&&r&&r.length?(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a}),r.map((e,t)=>(0,s.jsxs)("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ",v(e.value)]},t))]}):null},{})}),(0,s.jsx)(p.N,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1,name:"Portfolio Value"}),(0,s.jsx)(p.N,{type:"monotone",dataKey:"cost",stroke:"hsl(var(--muted-foreground))",strokeWidth:2,strokeDasharray:"5 5",dot:!1,name:"Total Cost"})]})})}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 pt-4 border-t border-border",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Value"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-primary",children:v((null==(t=j[j.length-1])?void 0:t.value)||0)})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Cost"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground",children:v((null==(r=j[j.length-1])?void 0:r.cost)||0)})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gain/Loss"}),(0,s.jsx)("p",{className:"text-lg font-semibold ".concat(((null==(l=j[j.length-1])?void 0:l.gainLoss)||0)>=0?"text-green-600":"text-red-600"),children:v((null==(n=j[j.length-1])?void 0:n.gainLoss)||0)})]})]})]})}var v=r(3401),N=r(83394);function b(e){let{portfolios:t,timeframe:r}=e,l=(0,a.useMemo)(()=>t.map(e=>{let t=e.totalValue-e.totalCost,r=e.totalCost>0?t/e.totalCost*100:0;return{name:e.name.length>15?e.name.substring(0,15)+"...":e.name,fullName:e.name,value:e.totalValue,cost:e.totalCost,gainLoss:t,performance:r,cardCount:e.cards.length}}),[t]),n=e=>"$".concat(e.toFixed(0));return l.map(e=>Math.max(e.value,e.cost)),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Portfolio Performance Comparison"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Compare current value vs. cost basis across all portfolios"})]}),(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(m.u,{width:"100%",height:"100%",children:(0,s.jsxs)(v.E,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",className:"opacity-30"}),(0,s.jsx)(h.W,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),(0,s.jsx)(f.h,{tick:{fontSize:12},tickFormatter:n}),(0,s.jsx)(g.m,{content:(0,s.jsx)(e=>{let{active:t,payload:r,label:a}=e;if(t&&r&&r.length){let e=r[0].payload;return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:e.fullName}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current Value: ",(0,s.jsx)("span",{className:"text-foreground font-medium",children:n(e.value)})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total Cost: ",(0,s.jsx)("span",{className:"text-foreground font-medium",children:n(e.cost)})]}),(0,s.jsxs)("p",{className:"text-sm ".concat(e.gainLoss>=0?"text-green-600":"text-red-600"),children:["Gain/Loss: ",(0,s.jsxs)("span",{className:"font-medium",children:[e.gainLoss>=0?"+":"",n(e.gainLoss),"(",e.performance>=0?"+":"",e.performance.toFixed(1),"%)"]})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Cards: ",(0,s.jsx)("span",{className:"text-foreground font-medium",children:e.cardCount})]})]})]})}return null},{})}),(0,s.jsx)(N.y,{dataKey:"cost",fill:"hsl(var(--muted-foreground))",opacity:.7,name:"Total Cost"}),(0,s.jsx)(N.y,{dataKey:"value",fill:"hsl(var(--primary))",name:"Current Value"})]})})}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-border",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Best Performer"}),l.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:l.reduce((e,t)=>t.performance>e.performance?t:e).fullName}),(0,s.jsxs)("p",{className:"text-sm text-green-600",children:["+",l.reduce((e,t)=>t.performance>e.performance?t:e).performance.toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Portfolios"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground",children:t.length})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Performance"}),(0,s.jsx)("p",{className:"text-lg font-semibold ".concat(l.reduce((e,t)=>e+t.performance,0)/l.length>=0?"text-green-600":"text-red-600"),children:l.length>0?"".concat((l.reduce((e,t)=>e+t.performance,0)/l.length).toFixed(1),"%"):"0%"})]})]})})]})}var y=r(8782),w=r(34e3),k=r(54811);let S=["hsl(var(--primary))","hsl(220, 70%, 60%)","hsl(280, 70%, 60%)","hsl(340, 70%, 60%)","hsl(40, 70%, 60%)","hsl(120, 70%, 60%)","hsl(180, 70%, 60%)","hsl(260, 70%, 60%)"],C={common:"hsl(210, 10%, 60%)",uncommon:"hsl(210, 15%, 45%)",rare:"hsl(45, 70%, 55%)",mythic:"hsl(15, 70%, 55%)"},F={W:"hsl(45, 70%, 85%)",U:"hsl(210, 70%, 60%)",B:"hsl(0, 0%, 20%)",R:"hsl(0, 70%, 60%)",G:"hsl(120, 70%, 45%)",Colorless:"hsl(0, 0%, 50%)"};function P(e){let{analytics:t}=e,{setData:r,rarityData:l,colorData:n}=(0,a.useMemo)(()=>{if(!t)return{setData:[],rarityData:[],colorData:[]};let e=Object.entries(t.diversification.bySet).map(e=>{let[t,r]=e;return{name:t,value:r}}).sort((e,t)=>t.value-e.value).slice(0,8);return{setData:e,rarityData:Object.entries(t.diversification.byRarity).map(e=>{let[t,r]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:r,color:C[t]||S[0]}}),colorData:Object.entries(t.diversification.byColor).map(e=>{let[t,r]=e;return{name:t,value:r,color:F[t]||S[0]}})}},[t]),o=e=>"$".concat(e.toFixed(0)),c=e=>{let{active:r,payload:a}=e;if(r&&a&&a.length){let e=a[0];return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-primary",children:["Value: ",o(e.value)]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.value/t.portfolioValue*100).toFixed(1),"% of portfolio"]})]})}return null},d=e=>{let{cx:t,cy:r,midAngle:a,innerRadius:l,outerRadius:n,percent:o}=e;if(o<.05)return null;let c=Math.PI/180,d=l+(n-l)*.5,i=t+d*Math.cos(-a*c),m=r+d*Math.sin(-a*c);return(0,s.jsx)("text",{x:i,y:m,fill:"white",textAnchor:i>t?"start":"end",dominantBaseline:"central",fontSize:12,fontWeight:"bold",children:"".concat((100*o).toFixed(0),"%")})};return t&&0!==t.portfolioValue?(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 lg:col-span-2",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Portfolio Diversification"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Distribution of your portfolio value across different categories"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-md font-medium text-foreground mb-3 text-center",children:"By Set"}),(0,s.jsx)("div",{className:"h-48",children:(0,s.jsx)(m.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(w.F,{data:r,cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",dataKey:"value",label:d,labelLine:!1,children:r.map((e,t)=>(0,s.jsx)(k.f,{fill:S[t%S.length]},"cell-".concat(t)))}),(0,s.jsx)(g.m,{content:(0,s.jsx)(c,{})})]})})}),(0,s.jsx)("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:r.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:S[t]}}),(0,s.jsxs)("span",{className:"truncate",children:[e.name,": ",o(e.value)]})]},e.name))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-md font-medium text-foreground mb-3 text-center",children:"By Rarity"}),(0,s.jsx)("div",{className:"h-48",children:(0,s.jsx)(m.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(w.F,{data:l,cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",dataKey:"value",label:d,labelLine:!1,children:l.map((e,t)=>(0,s.jsx)(k.f,{fill:e.color},"cell-".concat(t)))}),(0,s.jsx)(g.m,{content:(0,s.jsx)(c,{})})]})})}),(0,s.jsx)("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:l.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsxs)("span",{children:[e.name,": ",o(e.value)]})]},e.name))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-md font-medium text-foreground mb-3 text-center",children:"By Color"}),(0,s.jsx)("div",{className:"h-48",children:(0,s.jsx)(m.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(w.F,{data:n,cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",dataKey:"value",label:d,labelLine:!1,children:n.map((e,t)=>(0,s.jsx)(k.f,{fill:e.color},"cell-".concat(t)))}),(0,s.jsx)(g.m,{content:(0,s.jsx)(c,{})})]})})}),(0,s.jsx)("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:n.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsxs)("span",{children:[e.name,": ",o(e.value)]})]},e.name))})]})]}),(0,s.jsx)("div",{className:"mt-6 pt-4 border-t border-border",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-md font-medium text-foreground",children:"Diversification Score"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Lower concentration = better diversification"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(t.riskScore>70?"text-red-600":t.riskScore>40?"text-yellow-600":"text-green-600"),children:[(100-t.riskScore).toFixed(0),"/100"]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Risk Score: ",t.riskScore.toFixed(0)]})]})]})})]}):(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Portfolio Diversification"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analyze your portfolio distribution across sets, rarities, and colors"})]}),(0,s.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No portfolio data available"})})]})}var L=r(66766),M=r(68500),A=r(38564);function T(e){var t,r,l,o;let{portfolios:c,type:d}=e,i=(0,a.useMemo)(()=>c.flatMap(e=>e.cards).map(e=>{let t=(e.card.prices.usd||0)*e.quantity,r=e.purchasePrice*e.quantity,s=t-r;return{portfolioCard:e,gainLoss:s,gainLossPercent:r>0?s/r*100:0,currentValue:t,totalCost:r}}).sort((e,t)=>"best"===d?t.gainLoss-e.gainLoss:e.gainLoss-t.gainLoss).slice(0,5),[c,d]),m="best"===d?"Top Performers":"Worst Performers",x="best"===d?n.A:M.A;return 0===i.length?(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x,{className:"h-5 w-5 ".concat("best"===d?"text-green-500":"text-red-500")}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:m})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Cards with ","best"===d?"highest":"lowest"," returns in your portfolio"]})]}),(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No cards available"})]}):(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x,{className:"h-5 w-5 ".concat("best"===d?"text-green-500":"text-red-500")}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:m})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Cards with ","best"===d?"highest":"lowest"," returns in your portfolio"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:i.map((e,t)=>{let r=e.portfolioCard,a=e.gainLoss>=0;return(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-accent/50",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-6 text-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:t+1})}),(0,s.jsx)("div",{className:"w-10 h-14 bg-muted rounded border flex-shrink-0",children:r.card.imageUrl?(0,s.jsx)(L.default,{src:r.card.imageUrl,alt:r.card.name,width:40,height:56,className:"w-full h-full object-cover rounded"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-muted-foreground text-center p-1",children:r.card.name.substring(0,8)})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("h4",{className:"font-medium text-foreground truncate text-sm",children:[r.card.name,r.foil&&(0,s.jsx)(A.A,{className:"inline h-3 w-3 text-yellow-500 ml-1"})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[r.card.setName," • Qty: ",r.quantity]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 mt-1 text-xs",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["Purchased: $",r.purchasePrice.toFixed(2)]}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:["Current: $",(r.card.prices.usd||0).toFixed(2)]})]})]})})}),(0,s.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-sm font-medium ".concat(a?"text-green-600":"text-red-600"),children:[a?"+":"","$",e.gainLoss.toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs ".concat(a?"text-green-600":"text-red-600"),children:[a?"+":"",e.gainLossPercent.toFixed(1),"%"]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["$",e.currentValue.toFixed(2)," total"]})]})]},"".concat(r.cardId,"-").concat(r.foil,"-").concat(r.condition))})}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-border",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["best"===d?"Best":"Worst"," card:",(0,s.jsxs)("span",{className:"ml-1 font-medium ".concat("best"===d?"text-green-600":"text-red-600"),children:[(null==(t=i[0])?void 0:t.gainLoss)>=0?"+":"","$",null==(r=i[0])?void 0:r.gainLoss.toFixed(2),"(",(null==(l=i[0])?void 0:l.gainLossPercent)>=0?"+":"",null==(o=i[0])?void 0:o.gainLossPercent.toFixed(1),"%)"]})]})})})]})}var E=r(99445),I=r(62341);function D(e){let{timeframe:t}=e,[r,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l(!0)},[]);let n=(0,a.useMemo)(()=>{if(!r)return[];let e="7d"===t?7:"30d"===t?30:"90d"===t?90:365,s=[],a=new Date;for(let t=e-1;t>=0;t--){let r=new Date(a);r.setDate(r.getDate()-t);let l=100*(1+.1*Math.sin(r.getTime()/864e5*2*Math.PI/365))*(1+(e-t)/e*.2)*(.95+.1*Math.random()),n=1e3+500*Math.random(),o=20*Math.abs(Math.random()-.5);s.push({date:r.toISOString().split("T")[0],marketIndex:Math.round(100*l)/100,volume:Math.round(n),volatility:Math.round(100*o)/100,avgPrice:Math.round((.8*l+20*Math.random())*100)/100})}return s},[t,r]),o=(e,t)=>{switch(t){case"currency":return"$".concat(e.toFixed(2));case"index":return e.toFixed(1);case"volume":return"".concat((e/1e3).toFixed(1),"k");case"percent":return"".concat(e.toFixed(1),"%");default:return e.toString()}},c=n[n.length-1],d=n[n.length-2],i=c&&d?(c.marketIndex-d.marketIndex)/d.marketIndex*100:0,x=n.reduce((e,t)=>e+t.volatility,0)/n.length;return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Market Trends"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Overall market performance and trading activity"})]}),(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(m.u,{width:"100%",height:"100%",children:(0,s.jsxs)(E.Q,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"marketGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),(0,s.jsxs)("linearGradient",{id:"volumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--muted-foreground))",stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--muted-foreground))",stopOpacity:0})]})]}),(0,s.jsx)(u.d,{strokeDasharray:"3 3",className:"opacity-30"}),(0,s.jsx)(h.W,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)(f.h,{tick:{fontSize:12},tickFormatter:e=>o(e,"index")}),(0,s.jsx)(g.m,{content:(0,s.jsx)(e=>{let{active:t,payload:r,label:a}=e;return t&&r&&r.length?(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a}),r.map((e,t)=>(0,s.jsxs)("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ","Market Index"===e.name?o(e.value,"index"):"Volume"===e.name?o(e.value,"volume"):"Avg Price"===e.name?o(e.value,"currency"):o(e.value,"percent")]},t))]}):null},{})}),(0,s.jsx)(I.G,{type:"monotone",dataKey:"marketIndex",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#marketGradient)",strokeWidth:2,name:"Market Index"})]})})}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-border",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Market Index"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground",children:o((null==c?void 0:c.marketIndex)||0,"index")})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"24h Change"}),(0,s.jsxs)("p",{className:"text-lg font-semibold ".concat(i>=0?"text-green-600":"text-red-600"),children:[i>=0?"+":"",o(i,"percent")]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Volume"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground",children:o(n.reduce((e,t)=>e+t.volume,0)/n.length,"volume")})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Volatility"}),(0,s.jsx)("p",{className:"text-lg font-semibold ".concat(x>7?"text-red-600":x>4?"text-yellow-600":"text-green-600"),children:o(x,"percent")})]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-border",children:[(0,s.jsx)("h4",{className:"text-md font-medium text-foreground mb-2",children:"Market Insights"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Market Sentiment:"}),(0,s.jsx)("span",{className:"font-medium ".concat(i>2?"text-green-600":i<-2?"text-red-600":"text-yellow-600"),children:i>2?"Bullish":i<-2?"Bearish":"Neutral"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Trading Activity:"}),(0,s.jsx)("span",{className:"font-medium text-foreground",children:(null==c?void 0:c.volume)>1200?"High":(null==c?void 0:c.volume)>800?"Moderate":"Low"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Market Risk:"}),(0,s.jsx)("span",{className:"font-medium ".concat(x>7?"text-red-600":x>4?"text-yellow-600":"text-green-600"),children:x>7?"High":x>4?"Medium":"Low"})]})]})]})]})}var O=r(18533),R=r(92657),_=r(11914),G=r(58007);function V(e){let{timeframe:t}=e,[r,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{c(!0),m(null);let e=(0,i.Qo)();if(0===e.length)return void l([]);let r=e.slice(0,10).map(async e=>{try{let r=await (0,_.XJ)(e),s=r.prices.usd||0,a="7d"===t?7:"30d"===t?30:"90d"===t?90:365,l=(Math.random()-.5)*.2*Math.sqrt(a/30),n=s*l,o=s>0?n/s*100:0,c=2>Math.abs(o)?"stable":o>0?"up":"down";return{card:r,priceChange:n,priceChangePercent:o,trend:c}}catch(t){return console.error("Error loading card ".concat(e,":"),t),null}}),s=(await Promise.all(r)).filter(e=>null!==e);s.sort((e,t)=>t.priceChangePercent-e.priceChangePercent),l(s)}catch(e){console.error("Error loading watchlist:",e),m("Failed to load watchlist data")}finally{c(!1)}})()},[t]);let x={"7d":"7 days","30d":"30 days","90d":"90 days","1y":"1 year"}[t];if(o)return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(A.A,{className:"h-5 w-5 text-yellow-500"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Watchlist Performance"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Track price changes for cards you're watching over ",x]})]}),(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(G.k,{size:"large"})})]});if(d)return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(A.A,{className:"h-5 w-5 text-yellow-500"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Watchlist Performance"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center py-8 text-red-600",children:[(0,s.jsx)(O.A,{className:"h-5 w-5 mr-2"}),(0,s.jsx)("span",{children:d})]})]});if(0===r.length)return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(A.A,{className:"h-5 w-5 text-yellow-500"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Watchlist Performance"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Track price changes for cards you're watching over ",x]})]}),(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(R.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h4",{className:"text-md font-medium text-foreground mb-2",children:"No cards in watchlist"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add cards to your watchlist from the card browser to track their performance."})]})]});let u=r.reduce((e,t)=>e+t.priceChangePercent,0)/r.length,h=r.filter(e=>"up"===e.trend).length,f=r.filter(e=>"down"===e.trend).length;return(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(A.A,{className:"h-5 w-5 text-yellow-500"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Watchlist Performance"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Price changes for ",r.length," cards over ",x]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6 p-4 bg-accent rounded-lg",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Change"}),(0,s.jsxs)("p",{className:"text-lg font-semibold ".concat(u>=0?"text-green-600":"text-red-600"),children:[u>=0?"+":"",u.toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gainers"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-green-600",children:h})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Losers"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-red-600",children:f})]})]}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(e=>{let t=e.priceChangePercent>=0,r="up"===e.trend?n.A:"down"===e.trend?M.A:null;return(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-accent/30 hover:bg-accent/50 transition-colors",children:[(0,s.jsx)("div",{className:"w-10 h-14 bg-muted rounded border flex-shrink-0",children:e.card.imageUrl?(0,s.jsx)(L.default,{src:e.card.imageUrl,alt:e.card.name,width:40,height:56,className:"w-full h-full object-cover rounded"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-muted-foreground text-center p-1",children:e.card.name.substring(0,8)})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground truncate text-sm",children:e.card.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.card.setName}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Current: $",(e.card.prices.usd||0).toFixed(2)]}),r&&(0,s.jsx)(r,{className:"h-3 w-3 ".concat("up"===e.trend?"text-green-500":"text-red-500")})]})]}),(0,s.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-sm font-medium ".concat(t?"text-green-600":"text-red-600"),children:[t?"+":"","$",e.priceChange.toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs ".concat(t?"text-green-600":"text-red-600"),children:[t?"+":"",e.priceChangePercent.toFixed(1),"%"]})]}),(0,s.jsx)("button",{onClick:()=>{var t;return t=e.card.id,void((0,i.Qv)(t),l(e=>e.filter(e=>e.card.id!==t)))},className:"p-1 text-muted-foreground hover:text-red-500 transition-colors",title:"Remove from watchlist",children:(0,s.jsx)(A.A,{className:"h-4 w-4 fill-current"})})]},e.card.id)})})]})}function W(){let[e,t]=(0,a.useState)([]),[r,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null),[h,f]=(0,a.useState)("30d");(0,a.useEffect)(()=>{(async()=>{try{let e=(0,i.GP)();if(t(e),e.length>0){let t=g(e);u(t)}}catch(e){console.error("Error loading analytics:",e)}finally{m(!1)}})()},[]);let g=e=>{var t,r;let s=e.flatMap(e=>e.cards);if(0===s.length)return{portfolioValue:0,totalGainLoss:0,percentageReturn:0,bestPerformingCard:null,worstPerformingCard:null,diversification:{bySet:{},byRarity:{},byColor:{}},riskScore:0};let a=s.reduce((e,t)=>e+(t.card.prices.usd||0)*t.quantity,0),l=s.reduce((e,t)=>e+t.purchasePrice*t.quantity,0),n=a-l,o=s.map(e=>{let t=(e.card.prices.usd||0)*e.quantity,r=e.purchasePrice*e.quantity;return{card:e,gainLoss:t-r}});o.sort((e,t)=>t.gainLoss-e.gainLoss);let c=(null==(t=o[0])?void 0:t.card)||null,d=(null==(r=o[o.length-1])?void 0:r.card)||null,i={},m={},x={};s.forEach(e=>{let t=(e.card.prices.usd||0)*e.quantity;i[e.card.setName]=(i[e.card.setName]||0)+t,m[e.card.rarity]=(m[e.card.rarity]||0)+t,0===e.card.colors.length?x.Colorless=(x.Colorless||0)+t:e.card.colors.forEach(e=>{x[e]=(x[e]||0)+t})});let u=Math.min(100,Math.max(...Object.values(i))/a*100);return{portfolioValue:a,totalGainLoss:n,percentageReturn:l>0?n/l*100:0,bestPerformingCard:c,worstPerformingCard:d,diversification:{bySet:i,byRarity:m,byColor:x},riskScore:u}},p=(0,a.useMemo)(()=>x?[{title:"Total Portfolio Value",value:"$".concat(x.portfolioValue.toFixed(2)),icon:l.A,color:"text-blue-500"},{title:"Total Gain/Loss",value:"".concat(x.totalGainLoss>=0?"+":"","$").concat(x.totalGainLoss.toFixed(2)),icon:(x.totalGainLoss,n.A),color:x.totalGainLoss>=0?"text-green-500":"text-red-500"},{title:"Percentage Return",value:"".concat(x.percentageReturn>=0?"+":"").concat(x.percentageReturn.toFixed(1),"%"),icon:o.A,color:x.percentageReturn>=0?"text-green-500":"text-red-500"},{title:"Risk Score",value:"".concat(x.riskScore.toFixed(0),"/100"),icon:x.riskScore>70?c.A:d.A,color:x.riskScore>70?"text-orange-500":x.riskScore>40?"text-yellow-500":"text-green-500"}]:[],[x]);return r?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(G.k,{size:"large"})}):0===e.length?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)(o.A,{className:"h-8 w-8 text-primary"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Investment Analytics"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Analyze your MTG investment performance and market trends"})]}),(0,s.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,s.jsx)(o.A,{className:"h-16 w-16 text-muted-foreground mx-auto"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"No portfolio data"}),(0,s.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Create a portfolio and add some cards to see detailed investment analytics and performance insights."})]})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)(o.A,{className:"h-8 w-8 text-primary"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Investment Analytics"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Comprehensive analysis of your MTG investment portfolio performance"})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"flex bg-accent rounded-lg p-1",children:["7d","30d","90d","1y"].map(e=>(0,s.jsx)("button",{onClick:()=>f(e),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(h===e?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"),children:"7d"===e?"7 Days":"30d"===e?"30 Days":"90d"===e?"90 Days":"1 Year"},e))})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map((e,t)=>{let r=e.icon;return(0,s.jsx)("div",{className:"bg-card border border-border rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-accent ".concat(e.color),children:(0,s.jsx)(r,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.title}),(0,s.jsx)("p",{className:"text-xl font-semibold text-foreground",children:e.value})]})]})},t)})}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,s.jsx)(j,{portfolios:e,timeframe:h}),(0,s.jsx)(b,{portfolios:e,timeframe:h}),(0,s.jsx)(P,{analytics:x}),(0,s.jsx)(D,{timeframe:h})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,s.jsx)(T,{portfolios:e,type:"best"}),(0,s.jsx)(T,{portfolios:e,type:"worst"})]}),(0,s.jsx)(V,{timeframe:h})]})}},58007:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var s=r(95155);function a(e){let{size:t="medium",className:r=""}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center ".concat(r),children:(0,s.jsx)("div",{className:"animate-spin rounded-full border-2 border-primary border-t-transparent ".concat({small:"h-4 w-4",medium:"h-6 w-6",large:"h-8 w-8"}[t]),role:"status","aria-label":"Loading",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})})}},90531:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>p,GP:()=>o,Qo:()=>i,Qv:()=>x,SF:()=>f,c5:()=>c,hU:()=>u,lX:()=>h,om:()=>d,ru:()=>j,w7:()=>m});let s={PORTFOLIOS:"mtg-portfolios",WATCHLIST:"mtg-watchlist",PREFERENCES:"mtg-preferences",PRICE_ALERTS:"mtg-price-alerts",LAST_SYNC:"mtg-last-sync"},a={defaultCurrency:"usd",showFoilPrices:!1,defaultCondition:"near_mint",priceAlerts:[],dashboardLayout:["portfolio-overview","top-performers","price-alerts","market-trends"],theme:"dark"};function l(e,t){try{let r=localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.error('Error reading from localStorage key "'.concat(e,'":'),r),t}}function n(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error('Error writing to localStorage key "'.concat(e,'":'),t)}}function o(){return l(s.PORTFOLIOS,[])}function c(e){let t=o(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e),n(s.PORTFOLIOS,t),g()}function d(e){let t=o().filter(t=>t.id!==e);n(s.PORTFOLIOS,t),g()}function i(){return l(s.WATCHLIST,[])}function m(e){let t=i();t.includes(e)||(t.push(e),n(s.WATCHLIST,t),g())}function x(e){let t=i().filter(t=>t!==e);n(s.WATCHLIST,t),g()}function u(e){return i().includes(e)}function h(){return l(s.PREFERENCES,a)}function f(e){let t={...h(),...e};n(s.PREFERENCES,t),g()}function g(){n(s.LAST_SYNC,new Date().toISOString())}function p(){Object.values(s).forEach(e=>{try{localStorage.removeItem(e)}catch(t){console.error('Error removing localStorage key "'.concat(e,'":'),t)}})}function j(){try{let e=0;Object.values(s).forEach(t=>{let r=localStorage.getItem(t);r&&(e+=r.length)});let t=e/5242880*100;return{used:e,total:5242880,percentage:t}}catch(e){return console.error("Error calculating storage usage:",e),{used:0,total:0,percentage:0}}}},96401:(e,t,r)=>{Promise.resolve().then(r.bind(r,34805))}},e=>{e.O(0,[467,75,377,441,964,358],()=>e(e.s=96401)),_N_E=e.O()}]);