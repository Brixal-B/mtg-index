(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{381:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(72895).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},10809:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(72895).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},33127:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(72895).A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},37688:(e,r,t)=>{"use strict";t.d(r,{D:()=>n,ThemeProvider:()=>c});var a=t(95155),s=t(12115),o=t(90531);let l=(0,s.createContext)(void 0);function n(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}function c(e){let{children:r}=e,[t,n]=(0,s.useState)("dark"),[c,i]=(0,s.useState)("dark"),[d,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{u(!0)},[]),(0,s.useEffect)(()=>{if(d)try{let e=(0,o.lX)().theme||"dark";n(e)}catch(e){console.error("Error loading theme preference:",e),n("dark")}},[d]),(0,s.useEffect)(()=>{if(!d)return;let e=()=>{let e;i(e="system"===t?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t);let r=document.documentElement;r.classList.remove("light","dark"),r.classList.add(e)};if(e(),"system"===t){let r=window.matchMedia("(prefers-color-scheme: dark)");return r.addEventListener("change",e),()=>r.removeEventListener("change",e)}},[t,d]),d)?(0,a.jsx)(l.Provider,{value:{theme:t,setTheme:e=>{n(e);try{let r={...(0,o.lX)(),theme:e};(0,o.SF)(r)}catch(e){console.error("Error saving theme preference:",e)}},actualTheme:c},children:r}):(0,a.jsx)("div",{className:"dark",children:r})}},54213:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(72895).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},54416:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(72895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62525:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(72895).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},69668:(e,r,t)=>{Promise.resolve().then(t.bind(t,82178))},72895:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(12115),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(e,r)=>{let t=(0,a.forwardRef)((t,o)=>{let{color:l="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:d="",children:u,...m}=t;return(0,a.createElement)("svg",{ref:o,...s,width:n,height:n,stroke:l,strokeWidth:i?24*Number(c)/Number(n):c,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),d].join(" "),...m},[...r.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(u)?u:[u]])});return t.displayName="".concat(e),t}},82178:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>L});var a=t(95155),s=t(12115),o=t(72895);let l=(0,o.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var n=t(33127);let c=(0,o.A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var i=t(54213),d=t(381);let u=(0,o.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),m=(0,o.A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),p=(0,o.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),h=(0,o.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),x=(0,o.A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var f=t(62525);let g=(0,o.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),y=(0,o.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var b=t(10809),v=t(90531),j=t(37688);function N(e){let{title:r,description:t,children:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-4",children:r}),t&&(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:t})]}),s]})}function k(e){let{label:r,description:t,children:s,inline:o=!1}=e;return o?(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:r}),t&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:t})]}),s]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:r}),s,t&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:t})]})}function w(e){let{checked:r,onChange:t,disabled:s=!1}=e;return(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:r,onChange:e=>t(e.target.checked),disabled:s,className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"})]})}var A=t(54416),C=t(84616);function S(e){let{isOpen:r,onClose:t,onCreateAlert:o}=e,[l,n]=(0,s.useState)(""),[c,i]=(0,s.useState)(""),[d,u]=(0,s.useState)("below"),[m,p]=(0,s.useState)(!1),h=async e=>{if(e.preventDefault(),l.trim()&&c.trim()){p(!0);try{let e={id:"alert-".concat(Date.now()),cardId:"card-".concat(l.toLowerCase().replace(/\s+/g,"-")),targetPrice:parseFloat(c),condition:d,active:!0,createdAt:new Date().toISOString()};o(e),n(""),i(""),u("below"),t()}catch(e){console.error("Error creating price alert:",e)}finally{p(!1)}}};return r?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Create Price Alert"}),(0,a.jsx)("button",{onClick:t,className:"p-1 text-muted-foreground hover:text-foreground rounded-md hover:bg-accent",children:(0,a.jsx)(A.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Card Name"}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Enter card name...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Target Price ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:c,onChange:e=>i(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Alert Condition"}),(0,a.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,a.jsx)("option",{value:"below",children:"Price drops below target"}),(0,a.jsx)("option",{value:"above",children:"Price rises above target"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-border rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:m||!l.trim()||!c.trim(),className:"flex-1 flex items-center justify-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(C.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:m?"Creating...":"Create Alert"})]})]})]})]})}):null}let E=[{id:"general",name:"General",icon:l},{id:"appearance",name:"Appearance",icon:n.A},{id:"notifications",name:"Notifications",icon:c},{id:"data",name:"Data Management",icon:i.A}];function L(){let[e,r]=(0,s.useState)("general"),[t,o]=(0,s.useState)(null),[l,n]=(0,s.useState)(!1),[c,i]=(0,s.useState)(!0),[p,h]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{f(!0)},[]),(0,s.useEffect)(()=>{if(x)try{let e=(0,v.lX)();o(e)}catch(e){console.error("Error loading preferences:",e),o({defaultCurrency:"usd",showFoilPrices:!0,defaultCondition:"near_mint",priceAlerts:[],dashboardLayout:["portfolio","analytics","cards","admin"],theme:"dark"})}finally{i(!1)}},[x]);let g=(e,r)=>{t&&(o(t=>t?{...t,[e]:r}:null),n(!0))},y=async()=>{if(t&&l){h(!0);try{(0,v.SF)(t),n(!1),console.log("Preferences saved successfully")}catch(e){console.error("Error saving preferences:",e)}finally{h(!1)}}};return c||!t?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.A,{className:"h-8 w-8 text-primary"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Customize your MTG Tracker experience"})]}),l&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(o({defaultCurrency:"usd",showFoilPrices:!0,defaultCondition:"near_mint",priceAlerts:[],dashboardLayout:["portfolio","analytics","cards","admin"],theme:"dark"}),n(!0))},className:"flex items-center space-x-2 px-4 py-2 text-muted-foreground hover:text-foreground border border-border rounded-lg hover:bg-accent transition-colors",children:[(0,a.jsx)(u,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Reset"})]}),(0,a.jsxs)("button",{onClick:y,disabled:p,className:"flex items-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:[(0,a.jsx)(m,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:p?"Saving...":"Save Changes"})]})]})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("nav",{className:"space-y-2",children:E.map(t=>{let s=t.icon,o=e===t.id;return(0,a.jsxs)("button",{onClick:()=>r(t.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ".concat(o?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[(0,a.jsx)(s,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:t.name})]},t.id)})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:["general"===e&&(0,a.jsx)(P,{preferences:t,onPreferenceChange:g}),"appearance"===e&&(0,a.jsx)(T,{preferences:t,onPreferenceChange:g}),"notifications"===e&&(0,a.jsx)(M,{preferences:t,onPreferenceChange:g}),"data"===e&&(0,a.jsx)(I,{})]})})]})]})}function P(e){let{preferences:r,onPreferenceChange:t}=e;return(0,a.jsx)(N,{title:"General Settings",description:"Configure basic application preferences and defaults.",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(k,{label:"Default Currency",description:"Choose your preferred currency for displaying card prices.",children:(0,a.jsxs)("select",{value:r.defaultCurrency,onChange:e=>t("defaultCurrency",e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,a.jsx)("option",{value:"usd",children:"USD ($)"}),(0,a.jsx)("option",{value:"eur",children:"EUR (€)"})]})}),(0,a.jsx)(k,{label:"Show Foil Prices",description:"Display foil prices alongside regular card prices.",inline:!0,children:(0,a.jsx)(w,{checked:r.showFoilPrices,onChange:e=>t("showFoilPrices",e)})}),(0,a.jsx)(k,{label:"Default Card Condition",description:"Default condition when adding new cards to your portfolio.",children:(0,a.jsxs)("select",{value:r.defaultCondition,onChange:e=>t("defaultCondition",e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,a.jsx)("option",{value:"mint",children:"Mint"}),(0,a.jsx)("option",{value:"near_mint",children:"Near Mint"}),(0,a.jsx)("option",{value:"excellent",children:"Excellent"}),(0,a.jsx)("option",{value:"good",children:"Good"}),(0,a.jsx)("option",{value:"light_played",children:"Light Played"}),(0,a.jsx)("option",{value:"played",children:"Played"}),(0,a.jsx)("option",{value:"poor",children:"Poor"})]})})]})})}function T(e){let{preferences:r,onPreferenceChange:t}=e,{theme:s,setTheme:o,actualTheme:l}=(0,j.D)();return(0,a.jsx)(N,{title:"Appearance",description:"Customize the look and layout of your dashboard.",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(k,{label:"Theme",description:"Choose your preferred color theme for the application.",children:[(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{value:"light",label:"Light",icon:p,description:"Light theme"},{value:"dark",label:"Dark",icon:h,description:"Dark theme"},{value:"system",label:"System",icon:x,description:"Follow system preference"}].map(e=>{let l=e.icon,n=(r.theme||s)===e.value;return(0,a.jsxs)("button",{onClick:()=>{var r;o(r=e.value),t("theme",r)},className:"\n                    relative flex flex-col items-center p-4 rounded-lg border-2 transition-all\n                    ".concat(n?"border-primary bg-primary/10 text-primary":"border-border bg-card text-muted-foreground hover:text-foreground hover:bg-accent","\n                  "),children:[(0,a.jsx)(l,{className:"h-6 w-6 mb-2"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("span",{className:"text-xs opacity-75 mt-1",children:e.description}),n&&(0,a.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-primary rounded-full"})]},e.value)})}),"system"===s&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Currently using ",l," mode (system preference)"]})]}),(0,a.jsx)(k,{label:"Dashboard Layout",description:"Reorder dashboard sections according to your preference.",children:(0,a.jsx)("div",{className:"space-y-2",children:r.dashboardLayout.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg bg-accent/50",children:[(0,a.jsx)("span",{className:"text-sm font-medium capitalize",children:e}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{let e=[...r.dashboardLayout];s>0&&([e[s],e[s-1]]=[e[s-1],e[s]],t("dashboardLayout",e))},disabled:0===s,className:"p-1 text-muted-foreground hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",children:"↑"}),(0,a.jsx)("button",{onClick:()=>{let e=[...r.dashboardLayout];s<e.length-1&&([e[s],e[s+1]]=[e[s+1],e[s]],t("dashboardLayout",e))},disabled:s===r.dashboardLayout.length-1,className:"p-1 text-muted-foreground hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",children:"↓"})]})]},e))})})]})})}function M(e){let{preferences:r,onPreferenceChange:t}=e,[o,l]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N,{title:"Notifications",description:"Manage price alerts and notification preferences.",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Price Alerts"}),(0,a.jsx)("button",{onClick:()=>l(!0),className:"text-sm text-primary hover:text-primary/80",children:"+ Add Alert"})]}),0===r.priceAlerts.length?(0,a.jsxs)("div",{className:"text-center py-8 space-y-2",children:[(0,a.jsx)(c,{className:"h-8 w-8 text-muted-foreground mx-auto"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No price alerts set"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Create alerts to be notified when card prices change."})]}):(0,a.jsx)("div",{className:"space-y-2",children:r.priceAlerts.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Card Alert"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Alert when price goes ",e.condition," $",e.targetPrice.toFixed(2)]})]}),(0,a.jsx)("button",{onClick:()=>{t("priceAlerts",r.priceAlerts.filter(r=>r.id!==e.id))},className:"text-red-500 hover:text-red-600",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})]},e.id))})]}),(0,a.jsx)("div",{className:"p-4 border border-dashed border-border rounded-lg",children:(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(c,{className:"h-8 w-8 text-muted-foreground mx-auto"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Email & Push Notifications"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Advanced notification settings coming soon!"})]})})]})}),(0,a.jsx)(S,{isOpen:o,onClose:()=>l(!1),onCreateAlert:e=>{t("priceAlerts",[...r.priceAlerts,e])}})]})}function I(){let[e,r]=(0,s.useState)(!1),[t,o]=(0,s.useState)(!1),l=async()=>{r(!0);try{let e={portfolios:JSON.parse(localStorage.getItem("mtg-portfolios")||"[]"),preferences:JSON.parse(localStorage.getItem("mtg-preferences")||"{}"),exportDate:new Date().toISOString()},r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(r),a=document.createElement("a");a.href=t,a.download="mtg-tracker-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}catch(e){console.error("Export failed:",e)}finally{r(!1)}};return(0,a.jsx)(N,{title:"Data Management",description:"Import, export, and manage your MTG Tracker data.",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Export Data"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Download a backup of all your portfolios and settings."}),(0,a.jsxs)("button",{onClick:l,disabled:e,className:"flex items-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:[(0,a.jsx)(g,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e?"Exporting...":"Export Data"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Import Data"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Restore your data from a previous backup. This will replace all current data."}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"file",accept:".json",onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(!t)return;o(!0);let a=new FileReader;a.onload=e=>{try{var r;let t=JSON.parse(null==(r=e.target)?void 0:r.result);confirm("This will replace all your current data. Are you sure you want to continue?")&&(t.portfolios&&localStorage.setItem("mtg-portfolios",JSON.stringify(t.portfolios)),t.preferences&&localStorage.setItem("mtg-preferences",JSON.stringify(t.preferences)),window.location.reload())}catch(e){console.error("Import failed:",e),alert("Failed to import data. Please check the file format.")}finally{o(!1)}},a.readAsText(t)},className:"hidden",id:"import-file",disabled:t}),(0,a.jsxs)("label",{htmlFor:"import-file",className:"flex items-center space-x-2 px-4 py-2 border border-border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:[(0,a.jsx)(y,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:t?"Importing...":"Import Data"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3 pt-6 border-t border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Danger Zone"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Permanently delete all your data. This action cannot be undone."}),(0,a.jsxs)("button",{onClick:()=>{confirm("This will permanently delete ALL your data including portfolios, preferences, and settings. This cannot be undone. Are you sure?")&&confirm("This is your final warning. ALL DATA WILL BE LOST. Continue?")&&(localStorage.removeItem("mtg-portfolios"),localStorage.removeItem("mtg-preferences"),localStorage.removeItem("mtg-watchlist"),window.location.reload())},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Reset All Data"})]})]})]})})}},84616:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(72895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},90531:(e,r,t)=>{"use strict";t.d(r,{Bq:()=>g,GP:()=>n,Qo:()=>d,Qv:()=>m,SF:()=>x,c5:()=>c,hU:()=>p,lX:()=>h,om:()=>i,ru:()=>y,w7:()=>u});let a={PORTFOLIOS:"mtg-portfolios",WATCHLIST:"mtg-watchlist",PREFERENCES:"mtg-preferences",PRICE_ALERTS:"mtg-price-alerts",LAST_SYNC:"mtg-last-sync"},s={defaultCurrency:"usd",showFoilPrices:!1,defaultCondition:"near_mint",priceAlerts:[],dashboardLayout:["portfolio-overview","top-performers","price-alerts","market-trends"],theme:"dark"};function o(e,r){try{let t=localStorage.getItem(e);return t?JSON.parse(t):r}catch(t){return console.error('Error reading from localStorage key "'.concat(e,'":'),t),r}}function l(e,r){try{localStorage.setItem(e,JSON.stringify(r))}catch(r){console.error('Error writing to localStorage key "'.concat(e,'":'),r)}}function n(){return o(a.PORTFOLIOS,[])}function c(e){let r=n(),t=r.findIndex(r=>r.id===e.id);t>=0?r[t]=e:r.push(e),l(a.PORTFOLIOS,r),f()}function i(e){let r=n().filter(r=>r.id!==e);l(a.PORTFOLIOS,r),f()}function d(){return o(a.WATCHLIST,[])}function u(e){let r=d();r.includes(e)||(r.push(e),l(a.WATCHLIST,r),f())}function m(e){let r=d().filter(r=>r!==e);l(a.WATCHLIST,r),f()}function p(e){return d().includes(e)}function h(){return o(a.PREFERENCES,s)}function x(e){let r={...h(),...e};l(a.PREFERENCES,r),f()}function f(){l(a.LAST_SYNC,new Date().toISOString())}function g(){Object.values(a).forEach(e=>{try{localStorage.removeItem(e)}catch(r){console.error('Error removing localStorage key "'.concat(e,'":'),r)}})}function y(){try{let e=0;Object.values(a).forEach(r=>{let t=localStorage.getItem(r);t&&(e+=t.length)});let r=e/5242880*100;return{used:e,total:5242880,percentage:r}}catch(e){return console.error("Error calculating storage usage:",e),{used:0,total:0,percentage:0}}}}},e=>{e.O(0,[441,964,358],()=>e(e.s=69668)),_N_E=e.O()}]);