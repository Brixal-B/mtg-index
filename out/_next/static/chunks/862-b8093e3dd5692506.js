"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{11914:(e,t,r)=>{r.d(t,{Md:()=>n,SQ:()=>d,XJ:()=>i,jG:()=>c});let a="https://api.scryfall.com",s=0;async function o(e){let t=Date.now()-s;t<100&&await new Promise(e=>setTimeout(e,100-t)),s=Date.now();let r=await fetch(e);if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return r}function l(e){var t,r,a,s,o,l,n,c,i,d;return{id:e.id,name:e.name,manaCost:e.mana_cost||"",convertedManaCost:e.cmc||0,type:e.type_line||"",text:e.oracle_text||"",flavorText:e.flavor_text||"",power:e.power||"",toughness:e.toughness||"",loyalty:e.loyalty||"",imageUrl:(null==(t=e.image_uris)?void 0:t.normal)||(null==(s=e.card_faces)||null==(a=s[0])||null==(r=a.image_uris)?void 0:r.normal)||"",setName:e.set_name||"",setCode:e.set||"",number:e.collector_number||"",artist:e.artist||"",rarity:"mythic"===e.rarity?"mythic":"rare"===e.rarity?"rare":"uncommon"===e.rarity?"uncommon":"common",colors:e.colors||[],colorIdentity:e.color_identity||[],prices:{usd:(null==(o=e.prices)?void 0:o.usd)?parseFloat(e.prices.usd):null,usdFoil:(null==(l=e.prices)?void 0:l.usd_foil)?parseFloat(e.prices.usd_foil):null,eur:(null==(n=e.prices)?void 0:n.eur)?parseFloat(e.prices.eur):null,eurFoil:(null==(c=e.prices)?void 0:c.eur_foil)?parseFloat(e.prices.eur_foil):null,tix:(null==(i=e.prices)?void 0:i.tix)?parseFloat(e.prices.tix):null},legalities:e.legalities||{},multiverseId:null==(d=e.multiverse_ids)?void 0:d[0],scryfallId:e.id}}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{page:r=1,limit:s=20,order:n="name",dir:c="asc"}=t;try{var i;let t=new URLSearchParams({q:e,page:r.toString(),format:"json",order:n,dir:c}),s="".concat(a,"/cards/search?").concat(t),d=await o(s),u=await d.json(),m=(null==(i=u.data)?void 0:i.map(l))||[],h=u.total_cards||0;return{data:m,cards:m,totalCount:h,totalCards:h,hasMore:u.has_more||!1,page:r}}catch(e){return console.error("Error searching cards:",e),{data:[],cards:[],totalCount:0,totalCards:0,hasMore:!1,page:1}}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{colors:a,types:s,sets:o,rarity:l,minCmc:c,maxCmc:i,minPrice:d,maxPrice:u,format:m}=t,h=e;return a&&a.length>0&&(h+=" color:".concat(a.join(""))),s&&s.length>0&&(h+=" type:".concat(s.join(" OR type:"))),o&&o.length>0&&(h+=" set:".concat(o.join(" OR set:"))),l&&l.length>0&&(h+=" rarity:".concat(l.join(" OR rarity:"))),void 0!==c&&(h+=" cmc>=".concat(c)),void 0!==i&&(h+=" cmc<=".concat(i)),void 0!==d&&(h+=" usd>=".concat(d)),void 0!==u&&(h+=" usd<=".concat(u)),m&&(h+=" format:".concat(m)),n(h.trim(),r)}async function i(e){try{let t="".concat(a,"/cards/").concat(e),r=await o(t),s=await r.json();return l(s)}catch(t){throw console.error("Error fetching card:",t),Error("Failed to fetch card with ID: ".concat(e))}}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{let r=(await i(e)).prices.usd||0,a=[],s=new Date;for(let e=t;e>=0;e--){let t=new Date(s);t.setDate(t.getDate()-e);let o=(Math.random()-.5)*.1,l=1+o,n=r*Math.pow(.99+.02*Math.random(),e),c=Math.max(.01,n*l);a.push({date:t.toISOString().split("T")[0],price:Math.round(100*c)/100,priceType:"usd"})}return a}catch(e){return console.error("Error fetching price history:",e),[]}}},47924:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(72895).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},48907:(e,t,r)=>{r.d(t,{o:()=>x});var a=r(95155),s=r(12115),o=r(66766),l=r(92657),n=r(38564),c=r(84616),i=r(55868),d=r(90531);let u={common:"border-gray-400 bg-gray-50",uncommon:"border-gray-600 bg-gray-100",rare:"border-yellow-500 bg-yellow-50",mythic:"border-orange-500 bg-orange-50"},m={common:"text-gray-600",uncommon:"text-gray-700",rare:"text-yellow-600",mythic:"text-orange-600"},h={"{W}":"⚪","{U}":"\uD83D\uDD35","{B}":"⚫","{R}":"\uD83D\uDD34","{G}":"\uD83D\uDFE2","{C}":"◇","{X}":"X"};function x(e){let{card:t,onClick:r,showActions:x=!0}=e,[p,g]=(0,s.useState)((0,d.hU)(t.id)),[f,y]=(0,s.useState)(!1),v=()=>{r&&r(t)},w=t.prices.usd||t.prices.eur,j=t.prices.usdFoil||t.prices.eurFoil,N=0,b=!1;w&&w>0?N=w:j&&j>0&&(N=j,b=!0);let S=N>0?"$".concat(N.toFixed(2)):"N/A";return(0,a.jsxs)("div",{className:"group relative bg-card border rounded-lg overflow-hidden hover:shadow-lg hover:scale-105 transition-all duration-200 cursor-pointer ".concat(u[t.rarity]),onClick:v,role:"button",tabIndex:0,"data-testid":"card-item",onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),v())},children:[(0,a.jsxs)("div",{className:"aspect-[5/7] relative bg-muted",children:[t.imageUrl&&!f?(0,a.jsx)(o.default,{src:t.imageUrl,alt:t.name,fill:!0,className:"object-cover",onError:()=>y(!0),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full bg-muted text-muted-foreground",children:(0,a.jsxs)("div",{className:"text-center p-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:t.name}),(0,a.jsx)("div",{className:"text-xs",children:t.setCode.toUpperCase()})]})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),v()},className:"p-2 bg-white/20 backdrop-blur-sm rounded-full hover:bg-white/30 transition-colors",title:"View Details",children:(0,a.jsx)(l.A,{className:"h-4 w-4 text-white"})}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),p?((0,d.Qv)(t.id),g(!1)):((0,d.w7)(t.id),g(!0))},className:"p-2 backdrop-blur-sm rounded-full transition-colors ".concat(p?"bg-yellow-500/80 hover:bg-yellow-500":"bg-white/20 hover:bg-white/30"),title:p?"Remove from Watchlist":"Add to Watchlist","aria-label":p?"Remove from Watchlist":"Add to Watchlist",children:(0,a.jsx)(n.A,{className:"h-4 w-4 ".concat(p?"text-white fill-current":"text-white")})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),console.log("Add to portfolio:",t.name)},className:"p-2 bg-white/20 backdrop-blur-sm rounded-full hover:bg-white/30 transition-colors",title:"Add to Portfolio",children:(0,a.jsx)(c.A,{className:"h-4 w-4 text-white"})})]})]})})]}),(0,a.jsxs)("div",{className:"p-3 space-y-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground text-sm leading-tight line-clamp-2 truncate",children:t.name}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.setName," • ",(0,a.jsx)("span",{className:m[t.rarity],children:t.rarity})]})]}),t.manaCost&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Mana: "}),(0,a.jsx)("span",{className:"font-mono",children:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;return Object.entries(h).forEach(e=>{let[r,a]=e;t=t.replace(RegExp(r.replace(/[{}]/g,"\\$&"),"g"),a)}),t=t.replace(/\{(\d+)\}/g,"$1")}(t.manaCost)})]}),t.power&&t.toughness&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"P/T: "}),(0,a.jsxs)("span",{className:"font-medium",children:[t.power,"/",t.toughness]})]}),t.loyalty&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Loyalty: "}),(0,a.jsx)("span",{className:"font-medium",children:t.loyalty})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(i.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(N>0?"text-foreground":"text-muted-foreground"),children:[S,b&&N>0&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-1",children:"(Foil)"})]})]}),p&&(0,a.jsx)(n.A,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground line-clamp-1",children:t.type})]})]})}},53904:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(72895).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54416:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(72895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},55868:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(72895).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},58007:(e,t,r)=>{r.d(t,{k:()=>s});var a=r(95155);function s(e){let{size:t="medium",className:r=""}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center ".concat(r),children:(0,a.jsx)("div",{className:"animate-spin rounded-full border-2 border-primary border-t-transparent ".concat({small:"h-4 w-4",medium:"h-6 w-6",large:"h-8 w-8"}[t]),role:"status","aria-label":"Loading",children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})})}},84616:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(72895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},90163:(e,t,r)=>{r.d(t,{K:()=>l});var a=r(95155),s=r(18533),o=r(53904);function l(e){let{message:t,onRetry:r,className:l=""}=e;return(0,a.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 ".concat(l),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(s.A,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-destructive mb-1",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-destructive/90",children:t}),r&&(0,a.jsxs)("button",{onClick:r,className:"inline-flex items-center space-x-2 mt-3 text-sm text-destructive hover:text-destructive/80 transition-colors",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Try Again"})]})]})]})})}},90531:(e,t,r)=>{r.d(t,{Bq:()=>f,GP:()=>n,Qo:()=>d,Qv:()=>m,SF:()=>p,c5:()=>c,hU:()=>h,lX:()=>x,om:()=>i,ru:()=>y,w7:()=>u});let a={PORTFOLIOS:"mtg-portfolios",WATCHLIST:"mtg-watchlist",PREFERENCES:"mtg-preferences",PRICE_ALERTS:"mtg-price-alerts",LAST_SYNC:"mtg-last-sync"},s={defaultCurrency:"usd",showFoilPrices:!1,defaultCondition:"near_mint",priceAlerts:[],dashboardLayout:["portfolio-overview","top-performers","price-alerts","market-trends"],theme:"dark"};function o(e,t){try{let r=localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.error('Error reading from localStorage key "'.concat(e,'":'),r),t}}function l(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error('Error writing to localStorage key "'.concat(e,'":'),t)}}function n(){return o(a.PORTFOLIOS,[])}function c(e){let t=n(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e),l(a.PORTFOLIOS,t),g()}function i(e){let t=n().filter(t=>t.id!==e);l(a.PORTFOLIOS,t),g()}function d(){return o(a.WATCHLIST,[])}function u(e){let t=d();t.includes(e)||(t.push(e),l(a.WATCHLIST,t),g())}function m(e){let t=d().filter(t=>t!==e);l(a.WATCHLIST,t),g()}function h(e){return d().includes(e)}function x(){return o(a.PREFERENCES,s)}function p(e){let t={...x(),...e};l(a.PREFERENCES,t),g()}function g(){l(a.LAST_SYNC,new Date().toISOString())}function f(){Object.values(a).forEach(e=>{try{localStorage.removeItem(e)}catch(t){console.error('Error removing localStorage key "'.concat(e,'":'),t)}})}function y(){try{let e=0;Object.values(a).forEach(t=>{let r=localStorage.getItem(t);r&&(e+=r.length)});let t=e/5242880*100;return{used:e,total:5242880,percentage:t}}catch(e){return console.error("Error calculating storage usage:",e),{used:0,total:0,percentage:0}}}}}]);